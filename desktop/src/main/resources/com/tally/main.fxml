<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.tally.controller.MainController"
            styleClass="root-container"
            stylesheets="@css/app.css"
            prefWidth="960"
            prefHeight="600">

    <!-- Top toolbar -->
    <top>
        <HBox styleClass="toolbar" spacing="12" alignment="CENTER_LEFT">
            <Label text="Tally" styleClass="app-title-small"/>
            <Region HBox.hgrow="ALWAYS"/>

            <!-- Year navigation -->
            <Button fx:id="prevYearBtn" text="â€¹" onAction="#onPrevYear" styleClass="year-nav-btn"/>
            <Label fx:id="yearLabel" styleClass="year-label"/>
            <Button fx:id="nextYearBtn" text="â€º" onAction="#onNextYear" styleClass="year-nav-btn"/>

            <Separator orientation="VERTICAL" styleClass="toolbar-separator"/>

            <Label fx:id="usernameLabel" styleClass="toolbar-username"/>
            <Button text="Export" onAction="#onExportClicked" styleClass="toolbar-button"/>
            <Button fx:id="themeToggleBtn" text="ðŸŒ™" onAction="#onThemeToggleClicked" styleClass="toolbar-button"/>
            <Button text="Logout" onAction="#onLogoutClicked" styleClass="logout-button"/>
        </HBox>
    </top>

    <!-- Center: search bar + scrollable list of habit rows -->
    <center>
        <VBox>
            <!-- Search bar -->
            <HBox styleClass="search-bar" spacing="8" alignment="CENTER_LEFT">
                <TextField fx:id="searchField"
                           promptText="Search habits... (Ctrl+F)"
                           styleClass="search-field"
                           HBox.hgrow="ALWAYS"/>
                <Button fx:id="clearSearchBtn"
                        text="Ã—"
                        onAction="#onClearSearchClicked"
                        styleClass="clear-search-btn"
                        managed="false"
                        visible="false"/>
            </HBox>

            <!-- Scrollable list of habit rows -->
            <ScrollPane fitToWidth="true" styleClass="habits-scroll" hbarPolicy="NEVER" VBox.vgrow="ALWAYS">
                <VBox fx:id="habitsContainer" spacing="10" styleClass="habits-container">

                <!-- Loading / empty state -->
                <VBox fx:id="loadingPane" alignment="CENTER" styleClass="placeholder-area">
                    <Label text="Loading habits..." styleClass="placeholder-text"/>
                </VBox>

                <VBox fx:id="emptyPane" alignment="CENTER" spacing="8"
                      styleClass="placeholder-area" visible="false" managed="false">
                    <Label text="No habits yet" styleClass="placeholder-text"/>
                    <Label text="Add one below to get started" styleClass="placeholder-subtext"/>
                </VBox>

            </VBox>
        </ScrollPane>
        </VBox>
    </center>

    <!-- Bottom: add habit bar -->
    <bottom>
        <HBox styleClass="add-habit-bar" spacing="8" alignment="CENTER_LEFT">
            <TextField fx:id="newHabitNameField"
                       promptText="New habit name..."
                       styleClass="add-habit-field"
                       HBox.hgrow="ALWAYS"/>
            <Button fx:id="addHabitBtn"
                    text="+ Add Habit"
                    onAction="#onAddHabitClicked"
                    styleClass="primary-button"/>
        </HBox>
    </bottom>
</BorderPane>
